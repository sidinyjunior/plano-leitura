async function carregarTextoBiblico() {
    try {
        const res = await fetch(`${leitorContexto.versao}.json`);
        const data = await res.json();
        
        // 1. Padroniza a entrada (alguns JSONs são uma lista direta, outros têm o objeto .livros)
        let listaLivros = Array.isArray(data) ? data : data.livros;
        
        // 2. Tabela de tradução para os livros do seu plano (necessária para seus arquivos NVI/ACF)
        const mapaAbrev = {
            "Gênesis": "gn", "Êxodo": "ex", "Levítico": "lv", "Números": "nm", "Deuteronômio": "dt",
            "Josué": "js", "Juízes": "jz", "Rute": "rt", "1 Samuel": "1sm", "2 Samuel": "2sm",
            "1 Reis": "1rs", "2 Reis": "2rs", "1 Crônicas": "1cr", "2 Crônicas": "2cr",
            "Esdras": "ez", "Neemias": "ne", "Ester": "et", "Jó": "jo", "Salmos": "sl"
            // Adicione outros se necessário seguindo o padrão do seu JSON
        };

        const nomeBusca = leitorContexto.livro;
        const abrevBusca = mapaAbrev[nomeBusca];

        // 3. Busca o livro no arquivo tentando Nome, Name ou Abreviação
        const lData = listaLivros.find(l => 
            (l.nome === nomeBusca) || 
            (l.name === nomeBusca) || 
            (l.abbrev === abrevBusca) ||
            (l.id === abrevBusca)
        );

        if (!lData) {
            alert("Livro não encontrado no arquivo JSON: " + nomeBusca);
            return;
        }

        // 4. Identifica se o arquivo usa 'chapters' ou 'capitulos'
        const capítulos = lData.chapters || lData.capitulos;
        const versos = capítulos[leitorContexto.capAtual - 1];

        if (!versos) {
            alert("Capítulo não encontrado!");
            return;
        }

        // 5. Exibe na tela
        document.getElementById('reader-title').innerText = `${leitorContexto.livro} ${leitorContexto.capAtual}`;
        const cont = document.getElementById('reader-text');
        cont.innerHTML = versos.map((v, i) => `
            <div class="verse-row">
                <span class="verse-num">${i+1}</span>
                <span>${v}</span>
            </div>
        `).join('');
        
        cont.scrollTop = 0; 
        atualizarBotoesNavegacao();

    } catch(e) { 
        console.error("Erro detalhado:", e);
        alert("Erro ao carregar o texto. Verifique se o arquivo " + leitorContexto.versao + ".json está no GitHub."); 
    }
}
















